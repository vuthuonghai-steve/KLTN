<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Mermaid diagram specialist for creating flowcharts, sequence diagrams, ERDs, and architecture visualizations">

<title>skill</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="SKILL_files/libs/clipboard/clipboard.min.js"></script>
<script src="SKILL_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="SKILL_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="SKILL_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="SKILL_files/libs/quarto-html/popper.min.js"></script>
<script src="SKILL_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="SKILL_files/libs/quarto-html/anchor.min.js"></script>
<link href="SKILL_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="SKILL_files/libs/quarto-html/quarto-syntax-highlighting-ed96de9b727972fe78a7b5d16c58bf87.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="SKILL_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="SKILL_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="SKILL_files/libs/bootstrap/bootstrap-c9dc9f1d99d9de6c7995d031a2c2a410.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">




<section id="mermaid-diagram-specialist" class="level1">
<h1>Mermaid Diagram Specialist</h1>
<section id="overview" class="level2">
<h2 class="anchored" data-anchor-id="overview">Overview</h2>
<p><strong>Purpose</strong>: Expert in creating comprehensive Mermaid diagrams for documentation, architecture visualization, and process mapping</p>
<p><strong>Category</strong>: Tech <strong>Primary Users</strong>: tech-writer, architecture-validator, product-technical, tech-lead</p>
</section>
<section id="when-to-use-this-skill" class="level2">
<h2 class="anchored" data-anchor-id="when-to-use-this-skill">When to Use This Skill</h2>
<ul>
<li>Creating architecture documentation</li>
<li>Visualizing workflows and processes</li>
<li>Documenting data models (ERDs)</li>
<li>Explaining sequence flows</li>
<li>Creating state machines</li>
<li>Documenting component relationships</li>
<li>Creating decision trees</li>
<li>Visualizing user journeys</li>
</ul>
</section>
<section id="prerequisites" class="level2">
<h2 class="anchored" data-anchor-id="prerequisites">Prerequisites</h2>
<p><strong>Required:</strong></p>
<ul>
<li>Understanding of the system/process to document</li>
<li>Access to technical specifications</li>
<li>Knowledge of diagram type needed</li>
</ul>
<p><strong>Optional:</strong></p>
<ul>
<li>Design system colors for consistency</li>
<li>Existing documentation to reference</li>
</ul>
</section>
<section id="input" class="level2">
<h2 class="anchored" data-anchor-id="input">Input</h2>
<p><strong>What the skill needs:</strong></p>
<ul>
<li>Process/system description</li>
<li>Entities and relationships (for ERDs)</li>
<li>Component interactions (for sequence diagrams)</li>
<li>Architecture layers (for C4 diagrams)</li>
<li>States and transitions (for state diagrams)</li>
</ul>
</section>
<section id="workflow" class="level2">
<h2 class="anchored" data-anchor-id="workflow">Workflow</h2>
<section id="step-1-diagram-type-selection" class="level3">
<h3 class="anchored" data-anchor-id="step-1-diagram-type-selection">Step 1: Diagram Type Selection</h3>
<p><strong>Objective</strong>: Choose appropriate diagram type for requirements</p>
<p><strong>Available Diagram Types:</strong></p>
<ol type="1">
<li><strong>Flowchart</strong>: Decision flows, algorithms, processes</li>
<li><strong>Sequence Diagram</strong>: API interactions, message flows</li>
<li><strong>ERD</strong>: Database schemas, entity relationships</li>
<li><strong>Class Diagram</strong>: Object-oriented design</li>
<li><strong>State Diagram</strong>: State machines, lifecycle</li>
<li><strong>Gantt Chart</strong>: Project timelines, schedules</li>
<li><strong>C4 Diagram</strong>: Architecture at different levels</li>
<li><strong>Pie/Bar Charts</strong>: Data visualization</li>
<li><strong>Git Graph</strong>: Version control flows</li>
<li><strong>User Journey</strong>: User experience flows</li>
</ol>
<p><strong>Decision Matrix:</strong></p>
<ul>
<li>Process with decisions → <strong>Flowchart</strong></li>
<li>API/system interactions → <strong>Sequence Diagram</strong></li>
<li>Database structure → <strong>ERD</strong></li>
<li>System architecture → <strong>C4 Diagram</strong></li>
<li>Object relationships → <strong>Class Diagram</strong></li>
<li>State transitions → <strong>State Diagram</strong></li>
<li>Project timeline → <strong>Gantt Chart</strong></li>
</ul>
<p><strong>Validation:</strong></p>
<ul class="task-list">
<li><label><input type="checkbox">Diagram type matches content</label></li>
<li><label><input type="checkbox">Complexity appropriate</label></li>
<li><label><input type="checkbox">Audience considered</label></li>
<li><label><input type="checkbox">Purpose clear</label></li>
</ul>
<p><strong>Output</strong>: Selected diagram type</p>
</section>
<section id="step-2-flowchart-creation" class="level3">
<h3 class="anchored" data-anchor-id="step-2-flowchart-creation">Step 2: Flowchart Creation</h3>
<p><strong>Objective</strong>: Create process and decision flow diagrams</p>
<p><strong>Syntax:</strong></p>
<pre class="mermaid"><code>flowchart TD
    Start([Start]) --&gt; Input[/User Input/]
    Input --&gt; Validate{Valid?}
    Validate --&gt;|Yes| Process[Process Data]
    Validate --&gt;|No| Error[Show Error]
    Error --&gt; Input
    Process --&gt; Save[(Save to DB)]
    Save --&gt; Success[/Success Response/]
    Success --&gt; End([End])</code></pre>
<p><strong>Node Shapes:</strong></p>
<ul>
<li><code>[Rectangle]</code> - Process step</li>
<li><code>([Rounded])</code> - Start/End</li>
<li><code>{Diamond}</code> - Decision</li>
<li><code>[/Parallelogram/]</code> - Input/Output</li>
<li><code>[(Database)]</code> - Data storage</li>
<li><code>((Circle))</code> - Connector</li>
</ul>
<p><strong>Direction Options:</strong></p>
<ul>
<li><code>TD</code> - Top to Down</li>
<li><code>LR</code> - Left to Right</li>
<li><code>BT</code> - Bottom to Top</li>
<li><code>RL</code> - Right to Left</li>
</ul>
<p><strong>Example - Booking Flow:</strong></p>
<pre class="mermaid"><code>flowchart TD
    Start([User Initiates Booking]) --&gt; CheckDates[Check Date Availability]
    CheckDates --&gt; Available{Dates Available?}
    Available --&gt;|No| ShowError[/Show Unavailable Message/]
    ShowError --&gt; End([End])
    Available --&gt;|Yes| CreateBooking[Create Pending Booking]
    CreateBooking --&gt; Payment[Process Payment]
    Payment --&gt; PaymentSuccess{Payment Success?}
    PaymentSuccess --&gt;|No| CancelBooking[Cancel Booking]
    CancelBooking --&gt; ShowError
    PaymentSuccess --&gt;|Yes| ConfirmBooking[Confirm Booking]
    ConfirmBooking --&gt; SendEmail[/Send Confirmation Email/]
    SendEmail --&gt; SaveDB[(Save to Database)]
    SaveDB --&gt; Success[/Show Success/]
    Success --&gt; End</code></pre>
<p><strong>Validation:</strong></p>
<ul class="task-list">
<li><label><input type="checkbox">All paths covered</label></li>
<li><label><input type="checkbox">Decision points clear</label></li>
<li><label><input type="checkbox">Start and end defined</label></li>
<li><label><input type="checkbox">Flow direction logical</label></li>
</ul>
<p><strong>Output</strong>: Process flowchart</p>
</section>
<section id="step-3-sequence-diagram-creation" class="level3">
<h3 class="anchored" data-anchor-id="step-3-sequence-diagram-creation">Step 3: Sequence Diagram Creation</h3>
<p><strong>Objective</strong>: Document API interactions and message flows</p>
<p><strong>Syntax:</strong></p>
<pre class="mermaid"><code>sequenceDiagram
    actor User
    participant Frontend
    participant API
    participant DB
    participant Payment

    User-&gt;&gt;Frontend: Click "Book"
    Frontend-&gt;&gt;API: POST /api/bookings
    API-&gt;&gt;DB: Check availability
    DB--&gt;&gt;API: Available
    API-&gt;&gt;Payment: Process payment
    Payment--&gt;&gt;API: Payment successful
    API-&gt;&gt;DB: Create booking
    DB--&gt;&gt;API: Booking created
    API--&gt;&gt;Frontend: 201 Created
    Frontend--&gt;&gt;User: Show confirmation</code></pre>
<p><strong>Participant Types:</strong></p>
<ul>
<li><code>actor</code> - Human user</li>
<li><code>participant</code> - System/Service</li>
<li><code>database</code> - Database</li>
</ul>
<p><strong>Arrow Types:</strong></p>
<ul>
<li><code>-&gt;</code> - Solid line (synchronous)</li>
<li><code>--&gt;</code> - Dotted line (response)</li>
<li><code>-&gt;&gt;</code> - Solid arrow (async message)</li>
<li><code>--&gt;&gt;</code> - Dotted arrow (async response)</li>
</ul>
<p><strong>Example - Authentication Flow:</strong></p>
<pre class="mermaid"><code>sequenceDiagram
    actor User
    participant Frontend
    participant API
    participant Clerk
    participant DB

    User-&gt;&gt;Frontend: Enter credentials
    Frontend-&gt;&gt;Clerk: Login request
    Clerk-&gt;&gt;Clerk: Validate credentials
    alt Credentials valid
        Clerk--&gt;&gt;Frontend: JWT token
        Frontend-&gt;&gt;API: Request with token
        API-&gt;&gt;Clerk: Verify token
        Clerk--&gt;&gt;API: Token valid
        API-&gt;&gt;DB: Fetch user data
        DB--&gt;&gt;API: User data
        API--&gt;&gt;Frontend: User session
        Frontend--&gt;&gt;User: Logged in
    else Credentials invalid
        Clerk--&gt;&gt;Frontend: Auth error
        Frontend--&gt;&gt;User: Show error
    end</code></pre>
<p><strong>Validation:</strong></p>
<ul class="task-list">
<li><label><input type="checkbox">All participants identified</label></li>
<li><label><input type="checkbox">Message flow logical</label></li>
<li><label><input type="checkbox">Return messages shown</label></li>
<li><label><input type="checkbox">Alt/loop blocks used correctly</label></li>
</ul>
<p><strong>Output</strong>: Sequence diagram</p>
</section>
<section id="step-4-erd-creation" class="level3">
<h3 class="anchored" data-anchor-id="step-4-erd-creation">Step 4: ERD Creation</h3>
<p><strong>Objective</strong>: Document database schema and relationships</p>
<p><strong>Syntax:</strong></p>
<pre class="mermaid"><code>erDiagram
    USER ||--o{ BOOKING : creates
    ACCOMMODATION ||--o{ BOOKING : "booked for"
    USER {
        uuid id PK
        string email UK
        string name
        timestamp created_at
    }
    BOOKING {
        uuid id PK
        uuid user_id FK
        uuid accommodation_id FK
        date check_in
        date check_out
        enum status
    }
    ACCOMMODATION {
        uuid id PK
        string name
        text description
        decimal price_per_night
    }</code></pre>
<p><strong>Relationship Types:</strong></p>
<ul>
<li><code>||--||</code> - One to one</li>
<li><code>||--o{</code> - One to many</li>
<li><code>}o--o{</code> - Many to many</li>
<li><code>||--o|</code> - One to zero or one</li>
</ul>
<p><strong>Cardinality Symbols:</strong></p>
<ul>
<li><code>||</code> - Exactly one</li>
<li><code>o|</code> - Zero or one</li>
<li><code>}o</code> - Zero or more</li>
<li><code>}|</code> - One or more</li>
</ul>
<p><strong>Example - Full Hospeda ERD:</strong></p>
<pre class="mermaid"><code>erDiagram
    USER ||--o{ BOOKING : creates
    USER ||--o{ REVIEW : writes
    USER ||--o{ ACCOMMODATION : owns
    ACCOMMODATION ||--o{ BOOKING : "has bookings"
    ACCOMMODATION ||--o{ REVIEW : "has reviews"
    ACCOMMODATION }o--o{ AMENITY : includes
    BOOKING ||--|| PAYMENT : "has payment"

    USER {
        uuid id PK
        string clerk_id UK
        string email UK
        string name
        enum role
        timestamp created_at
    }

    ACCOMMODATION {
        uuid id PK
        uuid owner_id FK
        string name
        text description
        decimal price_per_night
        int max_guests
        enum status
    }

    BOOKING {
        uuid id PK
        uuid user_id FK
        uuid accommodation_id FK
        date check_in
        date check_out
        int guests
        enum status
        decimal total_price
    }

    REVIEW {
        uuid id PK
        uuid user_id FK
        uuid accommodation_id FK
        int rating
        text comment
        timestamp created_at
    }

    PAYMENT {
        uuid id PK
        uuid booking_id FK
        string mercadopago_id UK
        decimal amount
        enum status
        timestamp processed_at
    }

    AMENITY {
        uuid id PK
        string name
        string icon
    }</code></pre>
<p><strong>Validation:</strong></p>
<ul class="task-list">
<li><label><input type="checkbox">All entities defined</label></li>
<li><label><input type="checkbox">Relationships accurate</label></li>
<li><label><input type="checkbox">Cardinality correct</label></li>
<li><label><input type="checkbox">Primary/Foreign keys marked</label></li>
</ul>
<p><strong>Output</strong>: ERD diagram</p>
</section>
<section id="step-5-c4-architecture-diagrams" class="level3">
<h3 class="anchored" data-anchor-id="step-5-c4-architecture-diagrams">Step 5: C4 Architecture Diagrams</h3>
<p><strong>Objective</strong>: Document system architecture at different levels</p>
<p><strong>Context Level</strong> (System in environment):</p>
<pre class="mermaid"><code>C4Context
    title System Context - Hospeda Platform

    Person(guest, "Guest", "Tourist looking for accommodation")
    Person(owner, "Owner", "Accommodation owner")
    System(hospeda, "Hospeda Platform", "Tourism booking platform")

    System_Ext(clerk, "Clerk", "Authentication provider")
    System_Ext(mercadopago, "Mercado Pago", "Payment processor")
    System_Ext(email, "Email Service", "Transactional emails")

    Rel(guest, hospeda, "Searches and books", "HTTPS")
    Rel(owner, hospeda, "Manages listings", "HTTPS")
    Rel(hospeda, clerk, "Authenticates users", "API")
    Rel(hospeda, mercadopago, "Processes payments", "API")
    Rel(hospeda, email, "Sends notifications", "SMTP")</code></pre>
<p><strong>Container Level</strong> (Applications and data stores):</p>
<pre class="mermaid"><code>C4Container
    title Container - Hospeda Platform

    Person(user, "User")

    Container(web, "Web App", "Astro + React", "Public-facing website")
    Container(admin, "Admin Panel", "TanStack Start", "Management interface")
    Container(api, "API", "Hono", "Backend services")
    ContainerDb(db, "Database", "PostgreSQL", "Stores all data")

    Rel(user, web, "Uses", "HTTPS")
    Rel(user, admin, "Manages", "HTTPS")
    Rel(web, api, "Calls", "JSON/HTTPS")
    Rel(admin, api, "Calls", "JSON/HTTPS")
    Rel(api, db, "Reads/Writes", "SQL")</code></pre>
<p><strong>Component Level</strong> (Internal structure):</p>
<pre class="mermaid"><code>C4Component
    title Components - API Application

    Container(api, "API", "Hono")

    Component(routes, "Routes", "Hono Router", "HTTP endpoints")
    Component(services, "Services", "Business Logic", "Domain operations")
    Component(models, "Models", "Data Access", "DB operations")
    Component(middleware, "Middleware", "Cross-cutting", "Auth, logging, errors")

    Rel(routes, middleware, "Uses")
    Rel(routes, services, "Calls")
    Rel(services, models, "Uses")
    Rel(models, db, "Queries")</code></pre>
<p><strong>Validation:</strong></p>
<ul class="task-list">
<li><label><input type="checkbox">Appropriate level selected</label></li>
<li><label><input type="checkbox">All systems/containers shown</label></li>
<li><label><input type="checkbox">Relationships clear</label></li>
<li><label><input type="checkbox">External systems identified</label></li>
</ul>
<p><strong>Output</strong>: C4 architecture diagrams</p>
</section>
<section id="step-6-state-diagram-creation" class="level3">
<h3 class="anchored" data-anchor-id="step-6-state-diagram-creation">Step 6: State Diagram Creation</h3>
<p><strong>Objective</strong>: Document state machines and lifecycles</p>
<p><strong>Syntax:</strong></p>
<pre class="mermaid"><code>stateDiagram-v2
    [*] --&gt; Pending
    Pending --&gt; Confirmed : Payment Success
    Pending --&gt; Cancelled : Payment Failed
    Pending --&gt; Cancelled : User Cancels
    Confirmed --&gt; CheckedIn : Check-in Date
    Confirmed --&gt; Cancelled : Cancellation Request
    CheckedIn --&gt; CheckedOut : Check-out Date
    CheckedOut --&gt; Reviewed : User Submits Review
    CheckedOut --&gt; [*] : 30 Days Elapsed
    Reviewed --&gt; [*]
    Cancelled --&gt; [*]</code></pre>
<p><strong>Example - Booking Lifecycle:</strong></p>
<pre class="mermaid"><code>stateDiagram-v2
    [*] --&gt; Draft : Create Booking

    state "Pending Payment" as Pending
    state "Payment Processing" as Processing

    Draft --&gt; Pending : Submit Booking
    Pending --&gt; Processing : Initiate Payment

    Processing --&gt; Confirmed : Payment Approved
    Processing --&gt; PaymentFailed : Payment Declined

    PaymentFailed --&gt; Pending : Retry Payment
    PaymentFailed --&gt; Cancelled : Max Retries

    Confirmed --&gt; Active : Check-in Date Reached
    Active --&gt; Completed : Check-out Date Reached

    Confirmed --&gt; CancelRequested : Cancellation Request
    CancelRequested --&gt; RefundProcessing : Approve Cancellation
    RefundProcessing --&gt; Cancelled : Refund Complete

    Completed --&gt; [*]
    Cancelled --&gt; [*]

    note right of Confirmed
        Owner notified
        Calendar blocked
    end note

    note right of Completed
        Review requested
        Payment released
    end note</code></pre>
<p><strong>Validation:</strong></p>
<ul class="task-list">
<li><label><input type="checkbox">All states defined</label></li>
<li><label><input type="checkbox">Transitions logical</label></li>
<li><label><input type="checkbox">Start/end states marked</label></li>
<li><label><input type="checkbox">Notes explain key states</label></li>
</ul>
<p><strong>Output</strong>: State diagram</p>
</section>
<section id="step-7-styling-and-customization" class="level3">
<h3 class="anchored" data-anchor-id="step-7-styling-and-customization">Step 7: Styling and Customization</h3>
<p><strong>Objective</strong>: Apply consistent styling to diagrams</p>
<p><strong>Theme Application:</strong></p>
<pre class="mermaid"><code>%%{init: {'theme':'base', 'themeVariables': {
  'primaryColor':'#3B82F6',
  'primaryTextColor':'#fff',
  'primaryBorderColor':'#2563EB',
  'lineColor':'#6B7280',
  'secondaryColor':'#10B981',
  'tertiaryColor':'#F59E0B'
}}}%%
flowchart TD
    A[Start] --&gt; B[Process]
    B --&gt; C[End]</code></pre>
<p><strong>Class Styling:</strong></p>
<pre class="mermaid"><code>flowchart TD
    A[Normal] --&gt; B[Success]
    B --&gt; C[Error]

    classDef successClass fill:#10B981,stroke:#059669,color:#fff
    classDef errorClass fill:#EF4444,stroke:#DC2626,color:#fff

    class B successClass
    class C errorClass</code></pre>
<p><strong>Validation:</strong></p>
<ul class="task-list">
<li><label><input type="checkbox">Colors match brand</label></li>
<li><label><input type="checkbox">Contrast sufficient</label></li>
<li><label><input type="checkbox">Styling consistent</label></li>
<li><label><input type="checkbox">Readable in both themes</label></li>
</ul>
<p><strong>Output</strong>: Styled diagrams</p>
</section>
</section>
<section id="output" class="level2">
<h2 class="anchored" data-anchor-id="output">Output</h2>
<p><strong>Produces:</strong></p>
<ul>
<li>Mermaid diagram code in markdown</li>
<li>Multiple diagram types as needed</li>
<li>Styled and themed diagrams</li>
<li>Documentation-ready visualizations</li>
</ul>
<p><strong>Success Criteria:</strong></p>
<ul>
<li>Diagram accurately represents system</li>
<li>All elements properly labeled</li>
<li>Relationships clear and correct</li>
<li>Styling consistent with brand</li>
<li>Renders correctly in markdown</li>
</ul>
</section>
<section id="best-practices" class="level2">
<h2 class="anchored" data-anchor-id="best-practices">Best Practices</h2>
<ol type="1">
<li><strong>Simplicity</strong>: Keep diagrams focused and uncluttered</li>
<li><strong>Labels</strong>: Clear, descriptive labels for all elements</li>
<li><strong>Direction</strong>: Consistent flow direction (usually top-down or left-right)</li>
<li><strong>Grouping</strong>: Use subgraphs to group related elements</li>
<li><strong>Colors</strong>: Use color to highlight important elements</li>
<li><strong>Notes</strong>: Add notes to explain complex logic</li>
<li><strong>Levels</strong>: Use appropriate abstraction level for audience</li>
<li><strong>Updates</strong>: Keep diagrams in sync with code</li>
<li><strong>Comments</strong>: Add comments in mermaid code for maintainability</li>
<li><strong>Testing</strong>: Verify diagrams render in target platform</li>
</ol>
</section>
<section id="common-patterns" class="level2">
<h2 class="anchored" data-anchor-id="common-patterns">Common Patterns</h2>
<section id="api-request-flow" class="level3">
<h3 class="anchored" data-anchor-id="api-request-flow">API Request Flow</h3>
<pre class="mermaid"><code>sequenceDiagram
    Client-&gt;&gt;+API: GET /resource
    API-&gt;&gt;+Service: fetchResource()
    Service-&gt;&gt;+Model: findById()
    Model-&gt;&gt;+DB: SELECT query
    DB--&gt;&gt;-Model: Row data
    Model--&gt;&gt;-Service: Entity
    Service--&gt;&gt;-API: DTO
    API--&gt;&gt;-Client: JSON response</code></pre>
</section>
<section id="error-handling-flow" class="level3">
<h3 class="anchored" data-anchor-id="error-handling-flow">Error Handling Flow</h3>
<pre class="mermaid"><code>flowchart TD
    Request[Incoming Request] --&gt; Validate{Valid?}
    Validate --&gt;|No| ValidationError[Validation Error]
    ValidationError --&gt; ErrorHandler[Error Handler]
    Validate --&gt;|Yes| Process[Process Request]
    Process --&gt; DB{DB Success?}
    DB --&gt;|No| DBError[Database Error]
    DBError --&gt; ErrorHandler
    DB --&gt;|Yes| Success[Success Response]
    ErrorHandler --&gt; LogError[Log Error]
    LogError --&gt; ErrorResponse[Error Response]</code></pre>
</section>
</section>
<section id="notes" class="level2">
<h2 class="anchored" data-anchor-id="notes">Notes</h2>
<ul>
<li>Mermaid renders in GitHub, GitLab, Notion, and most markdown viewers</li>
<li>Live editor available at mermaid.live</li>
<li>Maximum complexity: Keep under 20 nodes for readability</li>
<li>Use subgraphs for grouping related nodes</li>
<li>Test rendering in target platform before committing</li>
<li>Keep diagram source in markdown files, not images</li>
<li>Version control diagrams with code</li>
<li>Update diagrams during code review</li>
</ul>
<hr>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>